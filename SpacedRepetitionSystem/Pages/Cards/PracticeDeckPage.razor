@page "/Decks/{Id:long}/Practice/"

@using SpacedRepetitionSystem.Components.ViewModels.Cards;
@using SpacedRepetitionSystem.Components.Interaction;
@using SpacedRepetitionSystem.Components.ViewModels;

@inherits PageBase<PracticeDeckViewModel>

<ViewModelArea ViewModel="ViewModel">
  <div class="card flex-grow-0 fullsizeCard">
    <div class="card-header">
      <div class="row">
        <div class="col col-md-auto">
          @ViewModel?.Deck?.GetDisplayName()
        </div>
        <div class="col d-flex justify-content-end">
          <Button Command="@ViewModel?.CloseCommand" IsIconButton="true" TextColor="#e74c3c"></Button>
        </div>
      </div>
    </div>
    <WaitSpinner Visible="IsLoading">
      <div class="card-body d-flex">
        <div class="d-flex mt-4 flex-column flex-grow-1">
          <div class="d-flex justify-content-center">
            <div style="font-size: 1.5rem">@(ViewModel.IsShowingSolution ? ViewModel.CurrentFieldName : ViewModel.DisplayedFieldName)</div>
          </div>
          <div class="d-flex justify-content-center">
            <div style="font-size: 3rem">@(ViewModel.IsShowingSolution ? ViewModel.Solution : ViewModel.DisplayedFieldValue)</div>
          </div>
          @if (!ViewModel.IsShowingSolution)
          {
            <div class="d-flex justify-content-center flex-grow-1 pt-4">
              <div style="font-size: 3rem">@(ViewModel.CurrentFieldName + ": ?")</div>
            </div>
            <div class="d-flex justify-content-center">
              @if (ViewModel?.Current?.Field?.CardFieldDefinition?.ShowInputForPractice == true)
              {
                <div class="input-group mb-3 col flex-fill" style="width: unset; padding: 0px; margin-top: 10px; margin-bottom: 10px;">
                  <div class="input-group-prepend">
                    <span class="input-group-text fieldLabel">Answer</span>
                  </div>
                  <input type="text" class="form-control" />
                </div>
              }
            </div>
          }
        </div>
      </div>
      <div class="card-footer">
        <div class="d-flex justify-content-center">
          @if (ViewModel.IsShowingSolution && ViewModel?.Current?.Field?.CardFieldDefinition?.ShowInputForPractice == false)
          {
            <Button Command="ViewModel.DoesNotKnowResultCommand" Classes="btn-lg ml-1 mr-1 btn-secondary"></Button>
            <Button Command="ViewModel.DifficultResultCommand" Classes="btn-lg ml-1 mr-1 btn-secondary"></Button>
            <Button Command="ViewModel.EasyResultCommand" Classes="btn-lg ml-1 mr-1 btn-secondary"></Button>
          }
          else if (ViewModel?.Current?.Field?.CardFieldDefinition?.ShowInputForPractice == false)
          {
            <Button Command="ViewModel.ShowSolutionCommand" Classes="btn-lg ml-1 mr-1 btn-secondary"></Button>
          }
        </div>
      </div>
    </WaitSpinner>
  </div>
</ViewModelArea>


@code
{
  /// <summary>
  /// Id of the Deck
  /// </summary>
  [Parameter]
  public object Id { set => ViewModel.LoadEntity(value); }
}
